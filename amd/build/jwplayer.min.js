define ("media_jwplayer/jwplayer",["jwplayer","jquery","core/ajax","core/log","module"],function(a,b,c,d,e){var f={context:null,eventMap:{started:"firstFrame",paused:"pause",seeked:"seek",resumed:"play",completed:"complete",failed:"error"},reqEventMap:{},init:function init(c,d){f.context=d;if(e.config().licensekey){a.key=e.config().licensekey}if(!b("#"+c.playerid).length){f.logError({type:"setupError",message:"The target element for player setup (#"+c.playerid+") is missing."});return}var g=a(c.playerid);g.setup(c.setupdata);if("undefined"!=typeof c.downloadbtn){g.addButton(c.downloadbtn.img,c.downloadbtn.tttext,function(){window.open(g.getPlaylistItem().file+"?forcedownload=true")},"download")}c.events.forEach(function(a){if("undefined"==typeof f.getEventName(a)){throw new Error("Event tracking for '"+a+"' has no JWPlayer API event mapping.")}f.reqEventMap[f.getEventName(a)]=a;if("error"!==f.getEventName(a)){g.on(f.getEventName(a),f.logEvent)}});g.on("setupError",f.logError);g.on("error",f.logError)},getEventName:function getEventName(a){return f.eventMap[a]},logEvent:function logEvent(a){var e={context:f.context,event:f.reqEventMap[a.type],title:this.getPlaylistItem().file,position:parseInt(this.getPosition())};if("undefined"!=typeof this.getPlaylistItem().title){e.title=this.getPlaylistItem().title}if("seek"===a.type){e.offset=parseInt(a.offset)}b.when(c.call([{methodname:"media_jwplayer_playback_event",args:e}])[0]).fail(d.error)},logError:function logError(a){if("setupError"===a.type){d.error("media_jwplayer setup error: "+a.message);return}d.error("media_jwplayer error: "+a.message);if("undefined"!=typeof f.reqEventMap.error){var e={context:f.context,title:this.getPlaylistItem().file,position:parseInt(this.getPosition()),code:a.code,message:a.message};if("undefined"!=typeof this.getPlaylistItem().title){e.title=this.getPlaylistItem().title}b.when(c.call([{methodname:"media_jwplayer_playback_failed",args:e}])[0]).fail(d.error)}}};return{setupPlayer:f.init}});
//# sourceMappingURL=jwplayer.min.js.map
