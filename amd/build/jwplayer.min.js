define ("media_jwplayer/jwplayer",["jwplayer","jquery","core/ajax","core/log","module"],function(a,b,c,d,e){var f={context:null,eventMap:{started:"firstFrame",paused:"pause",seeked:"seek",resumed:"play",completed:"complete"},reqEventMap:{},init:function init(c,g,h){f.context=h;if(!b("#"+g).length){throw new Error("The target element for player setup (#"+g+") is missing.")}if(e.config().licensekey){a.key=e.config().licensekey}var i=a(g);i.setup(c.setupdata);if("undefined"!=typeof c.downloadbtn){i.addButton(c.downloadbtn.img,c.downloadbtn.tttext,function(){window.open(i.getPlaylistItem().file+"?forcedownload=true")},"download")}c.events.forEach(function(a){if("undefined"==typeof f.getEventName(a)){throw new Error("Event tracking for '"+a+"' has no JWPlayer API event mapping.")}f.reqEventMap[f.getEventName(a)]=a;i.on(f.getEventName(a),f.logEvent)});if(c.logerrors){i.on("error",f.logError)}i.on("error",function(a){d.error("media_jwplayer error: "+a.message)});i.on("setupError",function(a){d.error("media_jwplayer setup error: "+a.message)})},getEventName:function getEventName(a){return f.eventMap[a]},logEvent:function logEvent(a){if("play"===a.type&&"interaction"!==a.playReason){return}if("pause"===a.type&&"interaction"!==a.pauseReason){return}var e={context:f.context,event:f.reqEventMap[a.type],title:this.getPlaylistItem().file,position:parseInt(this.getPosition())};if("undefined"!=typeof this.getPlaylistItem().title){e.title=this.getPlaylistItem().title}if("seek"===a.type){e.offset=parseInt(a.offset)}b.when(c.call([{methodname:"media_jwplayer_playback_event",args:e}])[0]).fail(d.error)},logError:function logError(a){var e={context:f.context,title:this.getPlaylistItem().file,position:parseInt(this.getPosition()),code:a.code,message:a.message};if("undefined"!=typeof this.getPlaylistItem().title){e.title=this.getPlaylistItem().title}b.when(c.call([{methodname:"media_jwplayer_playback_failed",args:e}])[0]).fail(d.error)}};return{setupPlayer:f.init}});
//# sourceMappingURL=jwplayer.min.js.map
